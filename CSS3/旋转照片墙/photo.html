<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>pic</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        body,html{
            width: 100%;
            height: 100%;
        }
        #all{
            width: 100%;
            height: 100%;
            background: url("img/bg.jpg");
        }
        body{
            position: relative;
        }
        #all .img{
            width: 125px;
            height: 125px;
            border: 5px solid #FFFFFF;
            box-shadow: 2px 2px 2px 2px rgba(0,0,0,0.5);
            position: absolute;
            cursor: pointer;
            top: -500px;
            left: -500px;
            transition: all 1s ease;
        }
    </style>
</head>
<body>
<div id="all"></div>
<script>
    var ROW = 4, COL= 6, NUM=ROW*COL,
      THUMB_WIDTH=125,THUMB_HEIGHT=125,
       BIG_WIDTH=750,BIG_HEIGHT=500;
      var oImgWidth;
      var oImgHeight;
      var fColGap;
      var fRorGap;
      var count=0;
    var index=0;
    var oall=document.getElementById("all");
    for(var i=0;i<NUM;i++){
        //小图片预加载
        var osmall=new  Image();
        osmall.onload=function(){
            count++;
            if(count==NUM *2){
                loadSucess();
            }
        };
        osmall.src="img/thumbs/"+(i+1)+".jpg";
        var obig=new Image();
        obig.onload=function(){
            //大图片预加载
            count++;
            if(count == NUM * 2){
             loadSucess();
            }
        };
        obig.src="img/"+(i+1)+".jpg"
    }
    function loadSucess()
    {
        for(var i=0;i<ROW ;i++)
        {
            for(var j=0;j<COL;j++)
            {
            index++;
            var oDiv=document.createElement("div");
            oDiv.style.backgroundImage="url(img/thumbs/"+index+".jpg)"
            oDiv.className="img";
            oDiv.innerHTML="<span></span>";
                oDiv.pos = {
                    col:j,
                    row:i
               };
                oDiv.index=index;
                oall.appendChild(oDiv);
            }
        }
        //计算空隙，确定图片位置
        aImg = document.getElementsByClassName("img");
        oImgHeight=aImg[0].offsetHeight;
        oImgWidth=aImg[0].offsetWidth;
        fColGap=(oall.offsetWidth - oImgWidth*COL)/(COL+1);
        fRorGap=(oall.offsetHeight - oImgHeight*ROW)/(ROW+1);
        for(var i=23;i>=0;i--){
           aImg[i].style.transitionDelay=(NUM-i)*100+"ms";
            aImg[i].style.top=(fRorGap+oImgHeight)*aImg[i].pos.row+fRorGap+"px";
            aImg[i].style.left=(fColGap+oImgWidth)*aImg[i].pos.col+fColGap+"px";
            aImg[i].style.transform="rotate("+(Math.random()*40-20)+"deg)"
        }

    }

</script>
</body>
</html>